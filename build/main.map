{"version":3,"sources":["webpack:///webpack/bootstrap 43a2f39ef1b74d18650c","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///external \"bcrypt\"","webpack:///external \"body-parser\"","webpack:///./src/index.js","webpack:///./src/config/config.js","webpack:///./src/routes/index.js","webpack:///./src/routes/users/index.js","webpack:///external \"jsonwebtoken\"","webpack:///./src/models/user.js","webpack:///./src/routes/tweets/index.js","webpack:///./src/models/tweet.js"],"names":["require","express","mongoose","routes","app","process","env","PORT","URLDB","connect","err","res","console","log","listen","users","tweets","module","exports","bcrypt","jwt","bodyParser","User","saltRounds","jsonParser","json","get","req","desde","query","Number","limite","find","skip","limit","exec","usuarios","status","ok","post","body","user","username","email","password","hashSync","save","userDB","usuario","put","id","params","findByIdAndUpdate","delete","cambiaEstado","estado","new","userBorrado","message","Schema","userSchema","type","String","required","unique","model","Tweet","or","text","search","author","tweet","tweetDB","tweetBorrado","ObjectId","Types","tweetSchema"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 43a2f39ef1b74d18650c","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 3\n// module chunks = 0","require('./config/config.js');\n//require('./login');\n\nconst express = require('express');\nconst mongoose = require('mongoose');\nconst routes = require ('./routes');\n\nconst app = express();\n\nroutes(app);\n\n\nprocess.env.PORT = process.env.PORT || 8083;\n\n\nprocess.env.URLDB = 'mongodb://localhost:27017/tweet';\n\n// mongoose.connect('mongodb://localhost/tweet');\n\n// mongoose.connection\n//     .once('open', () => console.log('Conexión con la base de datos establecida!'))\n//     .on('error', error => console.log(error));\nmongoose.connect(process.env.URLDB, (err, res) => {\n    if (err) throw err;\n  \n    console.log('base de datos ONLINE');\n  });\n\n    app.listen(process.env.PORT, ()=> {\n        console.log('escuchando en puerto:', process.env.PORT);\n    });\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","process.env.PORT = process.env.PORT || 8083;\n\n\nprocess.env.URLDB = 'mongodb://localhost:27017/tweet';\n\n\n// WEBPACK FOOTER //\n// ./src/config/config.js","const express = require('express');\n\n// app.use( require('./users'));\n// app.use( require('./tweets/tweet.js'));\n\nconst users = require( './users');\nconst tweets = require( './tweets');\n\n\n\n\nmodule.exports = (app) => {\n    users(app);\n    tweets(app);\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","const mongoose = require('mongoose');\n\nconst bcrypt = require('bcrypt');\nconst jwt = require('jsonwebtoken');\nconst bodyParser = require('body-parser');\nconst User = require('../../models/user.js');\n\nconst saltRounds = 10;\n\n\nconst jsonParser = bodyParser.json();\n\nmodule.exports = app => {\n\n    app.get('/users', function (req, res) {\n        let desde = req.query.desde || 0;\n        desde = Number(desde);\n        let limite = req.query.limite || 5;\n        limite = Number(limite);\n       \n\n\n        User.find({})\n            .skip(desde)\n            .limit(limite)\n            .exec((err, usuarios) => {\n                if (err) {\n                    return res.status(400).json({\n                        ok: false,\n                        err\n                    });\n                }\n                res.json({\n                    ok: true,\n                    usuarios\n                });\n            })\n    })\n\n    app.post('/users', jsonParser, function (req, res) {\n\n        let body = req.body;\n        console.log(body);\n\n        let user = new User({\n            username: body.username,\n            email: body.email,\n            password: bcrypt.hashSync(body.password, saltRounds),\n        });\n\n        user.save((err, userDB) => {\n\n            if (err) {\n                return res.status(400).json({\n                    ok: false,\n                    err\n                });\n            }\n            res.json({\n                ok: true,\n                usuario: userDB\n            });\n        });\n   });\n    \n    app.put('/users/:id', jsonParser, function (req, res) {\n        let id = req.params.id;\n        let body = (req.body);\n\n        User.findByIdAndUpdate(id, body, (err, userDB) => {\n\n            if (err) {\n                return res.status(400).json({\n                    ok: false,\n                    err\n                });\n            }\n            res.json({\n                ok: true,\n                usuario: userDB\n            });\n\n        });\n    });\n\n    app.delete('/users/:id', function (req, res) {\n\n        let id = req.params.id;\n\n        let cambiaEstado = {\n            estado: false\n        };\n\n        //user.findByIdAndRemove(id, (err, userBorrado) =>{\n        User.findByIdAndUpdate(id, cambiaEstado, {\n            new: true\n        }, (err, userBorrado) => {\n\n            if (err) {\n                return res.status(400).json({\n                    ok: false,\n                    err\n                });\n            }\n            if (!userBorrado) {\n                return res.status(400).json({\n                    ok: false,\n                    err: {\n                        message: 'El usuario no existe'\n                    }\n                });\n            }\n            res.json({\n                ok: true,\n                estado: userBorrado\n            })\n        })\n    });\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users/index.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 9\n// module chunks = 0","const mongoose = require('mongoose');\n\nlet Schema = mongoose.Schema;\n\nlet userSchema = new mongoose.Schema({\n    email: { \n        type: String,\n        required: true,\n        unique: true \n    },\n    password: {\n        type: String,\n        required: true,\n    },\n    username:{\n        type: String,\n        required: true,\n        unique: true  \n    }\n\n})\n\n\nmodule.exports = mongoose.model('User', userSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/user.js","//import { models } from \"mongoose\";\nconst mongoose = require('mongoose');\nconst bcrypt = require('bcrypt');\nconst bodyParser = require('body-parser');\n\nconst Tweet = require('../../models/tweet');\n\nconst jsonParser = bodyParser.json();\n\n\nmodule.exports = app => {\n\napp.get('/tweets',  (req, res) => {\n\n    let desde = req.query.desde || 0;\n        desde = Number(desde);\n    let limite = req.query.limite || 5;\n        limite = Number(limite);\n   \n        Tweet.find({ })\n        .or([{ text: req.query.search },{ author: req.query.search} ])\n        .skip(desde)\n        .limit(limite)\n        .exec( (err, tweets) => {\n          if (err) {\n            return res.status(400).json({\n                ok: false,\n                err\n            });\n        }\n            res.json({\n              ok:true,\n              tweets\n            });\n        })\n    });\n\napp.post('/tweets', jsonParser, (req, res) => {\n\n    let body = req.body;\n\n    let tweet = new Tweet({\n        text: body.text\n        })\n\n        tweet.save ((err, tweetDB) => {\n\n            if (err) {\n                return res.status(400).json({\n                    ok: false,\n                    err\n                });\n            }\n            res.json({\n                ok: true,\n                tweet: tweetDB\n            });\n        });\n    });\n\napp.put('/tweets/:id', jsonParser, function (req, res) {\n    let id = req.params.id;\n    let body = req.body;\n    \n    Tweet.findByIdAndUpdate(id, body, (err, tweetDB) => {\n\n        if (err) {\n        return res.status(400).json({\n            ok: false,\n            err\n        });\n    }\n    res.json({\n        ok: true,\n        tweet: tweetDB\n        });\n    \n    });\n});\n\napp.delete('/tweets/:id', function (req, res) {\n    \n    let id = req.params.id;\n\n    let cambiaEstado = { estado: false};\n    \n    //Tweet.findByIdAndRemove(id, (err, TweetBorrado) =>{\n    Tweet.findByIdAndUpdate(id, cambiaEstado, {new: true}, (err, tweetBorrado) =>{\n\n    if (err) {\n        return res.status(400).json({\n          ok: false,\n          err\n      });\n    }\n      if(!tweetBorrado) {\n        return res.status(400).json({\n          ok: false,\n          err: {\n            message: 'El tweet no existe'\n          }\n});\n    }\n    res.json({\n      ok: true,\n      estado: tweetBorrado\n        })\n    })\n});\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/routes/tweets/index.js","const mongoose = require('mongoose');\nconst ObjectId = mongoose.Schema.Types.ObjectId;\nlet Schema = mongoose.Schema;\n\nlet tweetSchema = new mongoose.Schema({\n    text: {\n        type: String,   \n    },\n    \n    author: ObjectId\n})\n\nmodule.exports = mongoose.model ('Tweet', tweetSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/tweet.js"],"sourceRoot":""}